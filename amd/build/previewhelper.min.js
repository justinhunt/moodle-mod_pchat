define(["jquery","mod_pchat/conversationconstants"],function(a,b){return{controls:{},mediatype:b.mediatype_audio,init:function(){this.initControls()},initControls:function(){this.controls.videoplayer=a(b.videoplayer),this.controls.audioplayer=a(b.audioplayer),this.controls.root=a(b.root),this.mediatype===b.mediatype_audio?this.controls.mediaplayer=this.controls.audioplayer:this.controls.mediaplayer=this.controls.videoplayer,this.controls.mediaplayer.show()},fetchCurrentTime:function(){return Math.floor(1e3*this.controls.mediaplayer[0].currentTime)},setMediaURL:function(a){if(!(!a|""==a.trim())){switch(this.mediatype){case b.mediatype_audio:this.mediatype=b.mediatype_audio,this.controls.mediaplayer.off("timeupdate"),this.controls.mediaplayer=this.controls.audioplayer,this.controls.root.addClass("player-audio");break;default:this.mediatype=b.mediatype_video,this.controls.mediaplayer.off("timeupdate"),this.controls.mediaplayer=this.controls.videoplayer,this.controls.root.removeClass("player-audio")}this.controls.mediaplayer.attr("src",a),this.controls.mediaplayer[0].load()}}}});