define(["jquery","core/log","mod_pchat/dependencyloader","theme_boost/popover"],function(a,b){"use strict";return b.debug("PChat Popover helper: initialising"),{lastitem:!1,dispose:!1,transcripttitle:M.util.get_string("heard","mod_pchat"),init:function(){this.register_events()},register_events:function(){},disposeWord:function(){if(this.dispose)return this.dispose;var b="3";switch(a.fn.popover.Constructor.hasOwnProperty("VERSION")&&(b=a.fn.popover.Constructor.VERSION.charAt(0)),b){case"4":this.dispose="dispose";break;case"3":default:this.dispose="destroy"}return this.dispose},remove:function(b){b?a(b).popover(this.disposeWord()):this.lastitem&&(a(this.lastitem).popover(this.disposeWord()),this.lastitem=!1)},isShowing:function(a){return this.lastitem===a},addTranscript:function(b,c){return this.lastitem===b?(a(this.lastitem).popover(this.disposeWord()),void(this.lastitem=!1)):(this.lastitem&&(a(this.lastitem).popover(this.disposeWord()),this.lastitem=!1),this.lastitem=b,a(b).popover({title:this.transcripttitle,content:c,trigger:"manual",placement:"top"}),void a(b).popover("show"))}}});