define(["jquery","core/log","mod_pchat/definitions","core/ajax","core/notification"],function(a,b,c,d,e){"use strict";return b.debug("PChat Updated Selected Topic: initialising"),{init:function(a){this.register_events(a.activityid)},register_events:function(b){var f=a("."+c.topicscontainer);f.on("click","."+c.topiccheckbox,function(c){var f=a(this),g=f.data("topicid");f.addClass("term-loading"),d.call([{methodname:"mod_pchat_toggle_topic_selected",args:{topicid:g,activityid:b}}])[0].then(function(b){return b?void f.addClass("term-seen"):a.Deferred().reject()}).fail(e.exception).always(function(){f.removeClass("term-loading")})})},all_selected:function(){var b=a("."+defs.topicscontainer);return b.find("."+defs.topiccheckbox).length===b.find(".term.term-seen").length}}});