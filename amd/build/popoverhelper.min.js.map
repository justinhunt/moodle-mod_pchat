{"version":3,"sources":["../src/popoverhelper.js"],"names":["define","$","log","debug","lastitem","dispose","transcripttitle","M","util","get_string","init","register_events","disposeWord","version","fn","popover","Constructor","hasOwnProperty","VERSION","charAt","remove","item","isShowing","addTranscript","transcript","title","content","trigger","placement"],"mappings":"AAAAA,OAAM,2BAAC,CAAC,QAAD,CAAW,UAAX,CAAuB,4BAAvB,CAAqD,qBAArD,CAAD,CAA8E,SAAUC,CAAV,CAAaC,CAAb,CAAkB,CAClG,aAMAA,CAAG,CAACC,KAAJ,CAAU,oCAAV,EAEA,MAAO,CAEHC,QAAQ,GAFL,CAGHC,OAAO,GAHJ,CAIHC,eAAe,CAAEC,CAAC,CAACC,IAAF,CAAOC,UAAP,CAAkB,OAAlB,CAA0B,WAA1B,CAJd,CAMHC,IAAI,CAAE,eAAY,CACd,KAAKC,eAAL,EACH,CARE,CAUHA,eAAe,CAAE,0BAAY,CAE5B,CAZE,CAgBHC,WAAW,CAAE,sBAAY,CACrB,GAAI,KAAKP,OAAT,CAAkB,CACd,MAAO,MAAKA,OACf,CACD,GAAIQ,CAAAA,CAAO,CAAG,GAAd,CACA,GAAIZ,CAAC,CAACa,EAAF,CAAKC,OAAL,CAAaC,WAAb,CAAyBC,cAAzB,CAAwC,SAAxC,CAAJ,CAAwD,CACpDJ,CAAO,CAAGZ,CAAC,CAACa,EAAF,CAAKC,OAAL,CAAaC,WAAb,CAAyBE,OAAzB,CAAiCC,MAAjC,CAAwC,CAAxC,CACb,CACD,OAAQN,CAAR,EACI,IAAK,GAAL,CACI,KAAKR,OAAL,CAAe,SAAf,CACA,MACJ,IAAK,GAAL,CACA,QACI,KAAKA,OAAL,CAAe,SAAf,CACA,MAPR,CASA,MAAO,MAAKA,OACf,CAlCE,CAoCHe,MAAM,CAAE,gBAAUC,CAAV,CAAgB,CACpB,GAAIA,CAAJ,CAAU,CACNpB,CAAC,CAACoB,CAAD,CAAD,CAAQN,OAAR,CAAgB,KAAKH,WAAL,EAAhB,CACH,CAFD,IAEO,IAAI,KAAKR,QAAT,CAAmB,CACtBH,CAAC,CAAC,KAAKG,QAAN,CAAD,CAAiBW,OAAjB,CAAyB,KAAKH,WAAL,EAAzB,EACA,KAAKR,QAAL,GACH,CACJ,CA3CE,CA6CHkB,SAAS,CAAE,mBAASD,CAAT,CAAc,CACrB,GAAG,KAAKjB,QAAL,GAAkBiB,CAArB,CAA2B,CACvB,QACH,CAFD,IAEK,CACD,QACH,CACJ,CAnDE,CAqDHE,aAAa,CAAE,uBAAUF,CAAV,CAAgBG,CAAhB,CAA4B,CAGvC,GAAI,KAAKpB,QAAL,GAAkBiB,CAAtB,CAA4B,CACxBpB,CAAC,CAAC,KAAKG,QAAN,CAAD,CAAiBW,OAAjB,CAAyB,KAAKH,WAAL,EAAzB,EACA,KAAKR,QAAL,IACA,MACH,CAGD,GAAI,KAAKA,QAAT,CAAmB,CACfH,CAAC,CAAC,KAAKG,QAAN,CAAD,CAAiBW,OAAjB,CAAyB,KAAKH,WAAL,EAAzB,EACA,KAAKR,QAAL,GACH,CACD,KAAKA,QAAL,CAAgBiB,CAAhB,CAGApB,CAAC,CAACoB,CAAD,CAAD,CAAQN,OAAR,CAAgB,CACZU,KAAK,CAAE,KAAKnB,eADA,CAEZoB,OAAO,CAAEF,CAFG,CAGZG,OAAO,CAAE,QAHG,CAIZC,SAAS,CAAE,KAJC,CAAhB,EAMA3B,CAAC,CAACoB,CAAD,CAAD,CAAQN,OAAR,CAAgB,MAAhB,CACH,CA7EE,CAgFV,CAzFK,CAAN","sourcesContent":["define(['jquery', 'core/log', 'mod_pchat/dependencyloader', 'theme_boost/popover'], function ($, log) {\r\n    \"use strict\"; // jshint ;_;\r\n\r\n    /*\r\n    This file is to manage the transcript popover\r\n     */\r\n\r\n    log.debug('PChat Popover helper: initialising');\r\n\r\n    return {\r\n\r\n        lastitem: false,\r\n        dispose: false, //Bv4 = dispose  Bv3 = destroy\r\n        transcripttitle: M.util.get_string('heard','mod_pchat'),\r\n\r\n        init: function () {\r\n            this.register_events();\r\n        },\r\n\r\n        register_events: function () {\r\n           return;\r\n        },\r\n\r\n        //different bootstrap/popover versions have a different word for \"dispose\" so this method bridges that.\r\n        //we can not be sure what version is installed\r\n        disposeWord: function () {\r\n            if (this.dispose) {\r\n                return this.dispose;\r\n            }\r\n            var version = '3';\r\n            if ($.fn.popover.Constructor.hasOwnProperty('VERSION')) {\r\n                version = $.fn.popover.Constructor.VERSION.charAt(0);\r\n            }\r\n            switch (version) {\r\n                case '4':\r\n                    this.dispose = 'dispose';\r\n                    break;\r\n                case '3':\r\n                default:\r\n                    this.dispose = 'destroy';\r\n                    break;\r\n            }\r\n            return this.dispose;\r\n        },\r\n\r\n        remove: function (item) {\r\n            if (item) {\r\n                $(item).popover(this.disposeWord());\r\n            } else if (this.lastitem) {\r\n                $(this.lastitem).popover(this.disposeWord());\r\n                this.lastitem = false;\r\n            }\r\n        },\r\n\r\n        isShowing: function(item){\r\n            if(this.lastitem === item) {\r\n                return true;\r\n            }else{\r\n                return false;\r\n            }\r\n        },\r\n\r\n        addTranscript: function (item, transcript) {\r\n\r\n            //if we are already showing this item then dispose of it, set last item to null and go home\r\n            if (this.lastitem === item) {\r\n                $(this.lastitem).popover(this.disposeWord());\r\n                this.lastitem = false;\r\n                return;\r\n            }\r\n\r\n            //dispose of previous popover, and remember this one\r\n            if (this.lastitem) {\r\n                $(this.lastitem).popover(this.disposeWord());\r\n                this.lastitem = false;\r\n            }\r\n            this.lastitem = item;\r\n\r\n            //lets add the popover\r\n            $(item).popover({\r\n                title: this.transcripttitle,\r\n                content: transcript,\r\n                trigger: 'manual',\r\n                placement: 'top'\r\n            });\r\n            $(item).popover('show');\r\n        }\r\n\r\n    };//end of return value\r\n});"],"file":"popoverhelper.min.js"}