define(["jquery","core/log","mod_pchat/definitions","mod_pchat/cloudpoodllloader","mod_pchat/recorderhelper"],function(a,b,c,d,e){"use strict";return b.debug("Recorder controller: initialising"),{clone:function(){return a.extend(!0,{},this)},init:function(d){var e=this.clone(),f="#amdopts_"+d.widgetid,g=a(f).get(0);return g?(e.activitydata=JSON.parse(g.value),a(f).remove(),e.cmid=d.cmid,e.recorderid=e.activitydata.recorderid,e.updatecontrolid=d.widgetid+c.C_UPDATECONTROL,void(e.is_browser_ok()&&e.setup_recorder())):void b.debug("PChat Recorder Controller: No config found on page. Giving up.")},is_browser_ok:function(){return navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia},setup_recorder:function(){var b=this,c=function(a){},d=function(a){},f=function(c){var d=a("#"+b.updatecontrolid);d.val(c.mediaurl)};e.init(b.activitydata,c,d,f)},process_html:function(){var a=(this.activitydata,{});this.controls=a},register_events:function(){}}});