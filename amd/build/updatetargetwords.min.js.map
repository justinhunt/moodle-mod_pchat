{"version":3,"sources":["../src/updatetargetwords.js"],"names":["define","$","log","def","notification","templates","debug","init","opts","theid","controlid","configcontrol","get","JSON","parse","value","remove","register_events","topics","trigger","update","on","newvalue","val","selectedtopic","each","id","targetwords","trim","tdata","split","render","then","html","d","C_TARGETWORDSDISPLAY"],"mappings":"AAAAA,OAAM,+BAAC,CAAC,QAAD,CAAU,UAAV,CAAqB,uBAArB,CAA8C,mBAA9C,CAAmE,gBAAnE,CAAD,CAAuF,SAASC,CAAT,CAAWC,CAAX,CAAgBC,CAAhB,CAAqBC,CAArB,CAAkCC,CAAlC,CAA6C,CACtI,aAMAH,CAAG,CAACI,KAAJ,CAAU,yCAAV,EAEA,MAAM,CAEFC,IAAI,CAAE,cAASC,CAAT,CAAe,IAEbC,CAAAA,CAAK,CAAG,YAAcD,CAAI,CAACE,SAFd,CAGbC,CAAa,CAAGV,CAAC,CAACQ,CAAD,CAAD,CAASG,GAAT,CAAa,CAAb,CAHH,CAIjB,GAAID,CAAJ,CAAmB,CACfH,CAAI,CAAGK,IAAI,CAACC,KAAL,CAAWH,CAAa,CAACI,KAAzB,CAAP,CACAd,CAAC,CAACQ,CAAD,CAAD,CAASO,MAAT,EACH,CAHD,IAGO,CAEHd,CAAG,CAACI,KAAJ,CAAU,gEAAV,EACA,MACH,CAED,KAAKW,eAAL,CAAqBT,CAAI,OAAzB,CAAoCA,CAAI,eAAxC,CAA4DA,CAAI,cAAhE,CACH,CAhBC,CAkBFS,eAAe,CAAE,yBAASC,CAAT,CAAgBC,CAAhB,CAAwBC,CAAxB,CAA+B,CAC5CnB,CAAC,CAAC,WAAYkB,CAAZ,CAAsB,KAAvB,CAAD,CAA8BE,EAA9B,CAAiC,QAAjC,CAA0C,UAAU,IAC5CC,CAAAA,CAAQ,CAAGrB,CAAC,CAAC,IAAD,CAAD,CAAQsB,GAAR,EADiC,CAE5CC,CAAa,GAF+B,CAGhDvB,CAAC,CAACwB,IAAF,CAAOP,CAAP,CAAc,UAAU,CACpB,GAAG,KAAKQ,EAAL,EAASJ,CAAZ,CAAqB,CACjBE,CAAa,CAAC,IACjB,CACJ,CAJD,EAKA,GAAGA,CAAH,CAAkB,CACdvB,CAAC,CAAC,WAAYmB,CAAZ,CAAqB,KAAtB,CAAD,CAA6BG,GAA7B,CAAiCC,CAAa,CAACG,WAA/C,EACA,GAAsC,EAAnC,GAAAH,CAAa,CAACG,WAAd,CAA0BC,IAA1B,EAAH,CAAyC,CAAC,MAAQ,CAClD,GAAIC,CAAAA,CAAK,CAAC,EAAV,CACAA,CAAK,YAAL,CAAsBL,CAAa,CAACG,WAAd,CAA0BG,KAA1B,CAAgC,IAAhC,CAAtB,CACAzB,CAAS,CAAC0B,MAAV,CAAiB,uBAAjB,CAAyCF,CAAzC,EAAgDG,IAAhD,CACI,SAASC,CAAT,CAAiB,CACb,GAAIC,CAAAA,CAAC,CAAEjC,CAAC,CAAC,IAAME,CAAG,CAACgC,oBAAX,CAAR,CACAD,CAAC,CAACD,IAAF,CAAOA,CAAP,CACH,CAJL,CAMH,CACJ,CApBD,CAqBH,CAxCC,CA4CT,CArDK,CAAN","sourcesContent":["define(['jquery','core/log','mod_pchat/definitions', 'core/notification', 'core/templates'], function($,log, def, notification,templates) {\r\n    \"use strict\"; // jshint ;_;\r\n\r\n/*\r\nThis file contains class and ID definitions.\r\n */\r\n\r\n    log.debug('PChat Update Target Words: initialising');\r\n\r\n    return{\r\n\r\n        init: function(opts) {\r\n            //pick up opts from html\r\n            var theid = '#amdopts_' + opts.controlid;\r\n            var configcontrol = $(theid).get(0);\r\n            if (configcontrol) {\r\n                opts = JSON.parse(configcontrol.value);\r\n                $(theid).remove();\r\n            } else {\r\n                //if there is no config we might as well give up\r\n                log.debug('Read Seed Test Controller: No config found on page. Giving up.');\r\n                return;\r\n            }\r\n\r\n            this.register_events(opts['topics'],opts['triggercontrol'], opts['updatecontrol']);\r\n        },\r\n\r\n        register_events: function(topics,trigger,update){\r\n            $('[name=\"' + trigger + '\"]').on('change',function(){\r\n                var newvalue = $(this).val();\r\n                var selectedtopic=false;\r\n                $.each(topics,function(){\r\n                    if(this.id==newvalue){\r\n                        selectedtopic=this;\r\n                    }\r\n                });\r\n                if(selectedtopic) {\r\n                    $('[name=\"' + update + '\"]').val(selectedtopic.targetwords);\r\n                    if(selectedtopic.targetwords.trim()===''){return;}\r\n                    var tdata=[];\r\n                    tdata['targetwords'] =selectedtopic.targetwords.split('\\n');\r\n                    templates.render('mod_pchat/targetwords',tdata).then(\r\n                        function(html,js){\r\n                            var d= $('#' + def.C_TARGETWORDSDISPLAY);\r\n                            d.html(html);\r\n                        }\r\n                    );\r\n                }\r\n            });\r\n        }\r\n\r\n};//end of return value\r\n\r\n});\r\n\r\n"],"file":"updatetargetwords.min.js"}