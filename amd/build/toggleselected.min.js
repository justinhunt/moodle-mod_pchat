define(["jquery","core/log","mod_pchat/definitions","core/notification"],function(a,b,c,d){"use strict";return b.debug("PChat Toggle Selected: initialising"),{init:function(a){this.register_events(a.container,a.item,a.updatecontrol,a.mode,a.maxchecks),this.init_controls(a.container,a.item,a.updatecontrol,a.mode)},init_controls:function(b,c,d,e){var f=a('[name="'+d+'"]').val();if(f)for(var g=f.split(","),h=0;h<g.length;h++)a("."+b+" ."+c).filter("[data-id="+g[h]+"]").addClass("active")},register_events:function(b,c,d,e,f){var g=a("."+b);g.on("click","."+c,function(b){var c=a('[name="'+d+'"]'),g=a(this),h=g.data("id");switch(e){case"checkbox":var i=c.val().split(",");if(i.includes(h.toString()))i.splice(i.indexOf(h.toString()),1);else{if(!(i.length<f))return void b.preventDefault();i.push(h)}i=i.filter(function(a){return a}),c.val(i.join(","));break;case"radio":default:c.val(h)}c.trigger("change")})}}});