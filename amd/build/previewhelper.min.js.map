{"version":3,"sources":["../src/previewhelper.js"],"names":["define","$","constants","controls","mediatype","mediatype_audio","init","initControls","videoplayer","audioplayer","root","mediaplayer","show","fetchCurrentTime","Math","floor","currentTime","setMediaURL","mediaurl","trim","off","addClass","mediatype_video","removeClass","attr","load"],"mappings":"AAAAA,OAAM,2BAAC,CAAC,QAAD,CAAU,iCAAV,CAAD,CAA+C,SAASC,CAAT,CAAYC,CAAZ,CAAuB,CAI1E,MAAO,CAEHC,QAAQ,CAAE,EAFP,CAGHC,SAAS,CAAEF,CAAS,CAACG,eAHlB,CAKHC,IAAI,CAAE,eAAU,CACV,KAAKC,YAAL,EACL,CAPE,CASHA,YAAY,CAAE,uBAAU,CACpB,KAAKJ,QAAL,CAAcK,WAAd,CAA4BP,CAAC,CAACC,CAAS,CAACM,WAAX,CAA7B,CACA,KAAKL,QAAL,CAAcM,WAAd,CAA4BR,CAAC,CAACC,CAAS,CAACO,WAAX,CAA7B,CACA,KAAKN,QAAL,CAAcO,IAAd,CAAqBT,CAAC,CAACC,CAAS,CAACQ,IAAX,CAAtB,CACA,GAAG,KAAKN,SAAL,GAAiBF,CAAS,CAACG,eAA9B,CAA8C,CAC1C,KAAKF,QAAL,CAAcQ,WAAd,CAA4B,KAAKR,QAAL,CAAcM,WAC7C,CAFD,IAEM,CACF,KAAKN,QAAL,CAAcQ,WAAd,CAA4B,KAAKR,QAAL,CAAcK,WAC7C,CACD,KAAKL,QAAL,CAAcQ,WAAd,CAA0BC,IAA1B,EACH,CAnBE,CAuBHC,gBAAgB,CAAE,2BAAU,CACzB,MAAOC,CAAAA,IAAI,CAACC,KAAL,CAAW,IAAO,KAAKZ,QAAL,CAAcQ,WAAd,CAA0B,CAA1B,EAA6BK,WAA/C,CACT,CAzBE,CA2BHC,WAAW,CAAE,qBAASC,CAAT,CAAkB,CAC7B,GAAG,CAACA,CAAD,CAA6B,EAAjB,EAAAA,CAAQ,CAACC,IAAT,EAAf,CAAmC,CAAC,MAAQ,CAC5C,OAAO,KAAKf,SAAZ,EACI,IAAKF,CAAAA,CAAS,CAACG,eAAf,CACI,KAAKD,SAAL,CAAeF,CAAS,CAACG,eAAzB,CACA,KAAKF,QAAL,CAAcQ,WAAd,CAA0BS,GAA1B,CAA8B,YAA9B,EACA,KAAKjB,QAAL,CAAcQ,WAAd,CAA4B,KAAKR,QAAL,CAAcM,WAA1C,CACA,KAAKN,QAAL,CAAcO,IAAd,CAAmBW,QAAnB,CAA4B,cAA5B,EACA,MAEJ,QACI,KAAKjB,SAAL,CAAeF,CAAS,CAACoB,eAAzB,CACA,KAAKnB,QAAL,CAAcQ,WAAd,CAA0BS,GAA1B,CAA8B,YAA9B,EACA,KAAKjB,QAAL,CAAcQ,WAAd,CAA4B,KAAKR,QAAL,CAAcK,WAA1C,CACA,KAAKL,QAAL,CAAcO,IAAd,CAAmBa,WAAnB,CAA+B,cAA/B,EAZR,CAcA,KAAKpB,QAAL,CAAcQ,WAAd,CAA0Ba,IAA1B,CAA+B,KAA/B,CAAqCN,CAArC,EACA,KAAKf,QAAL,CAAcQ,WAAd,CAA0B,CAA1B,EAA6Bc,IAA7B,EACD,CA7CE,CA+CR,CAnDK,CAAN","sourcesContent":["define([\"jquery\",\"mod_pchat/conversationconstants\"], function($, constants) {\r\n\r\n    //Preview helper manipulates the audio/video and passing on media events and info to other parts of app\r\n\r\n  return {\r\n\r\n      controls: {},\r\n      mediatype: constants.mediatype_audio,\r\n\r\n      init: function(){\r\n            this.initControls();\r\n      },\r\n\r\n      initControls: function(){\r\n          this.controls.videoplayer = $(constants.videoplayer);\r\n          this.controls.audioplayer = $(constants.audioplayer);\r\n          this.controls.root = $(constants.root);\r\n          if(this.mediatype===constants.mediatype_audio){\r\n              this.controls.mediaplayer = this.controls.audioplayer\r\n          }else {\r\n              this.controls.mediaplayer = this.controls.videoplayer\r\n          }\r\n          this.controls.mediaplayer.show();\r\n      },\r\n\r\n\r\n\r\n      fetchCurrentTime: function(){\r\n         return Math.floor(1000 * this.controls.mediaplayer[0].currentTime);//milliseconds\r\n      },\r\n\r\n      setMediaURL: function(mediaurl){\r\n        if(!mediaurl | mediaurl.trim()==''){return;}\r\n        switch(this.mediatype){\r\n            case constants.mediatype_audio:\r\n                this.mediatype=constants.mediatype_audio;\r\n                this.controls.mediaplayer.off('timeupdate');\r\n                this.controls.mediaplayer = this.controls.audioplayer;\r\n                this.controls.root.addClass('player-audio');\r\n                break;\r\n\r\n            default:\r\n                this.mediatype=constants.mediatype_video;\r\n                this.controls.mediaplayer.off('timeupdate');\r\n                this.controls.mediaplayer = this.controls.videoplayer;\r\n                this.controls.root.removeClass('player-audio');\r\n        }\r\n        this.controls.mediaplayer.attr(\"src\",mediaurl);\r\n        this.controls.mediaplayer[0].load();\r\n      }\r\n    }\r\n});\r\n"],"file":"previewhelper.min.js"}