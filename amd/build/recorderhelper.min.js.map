{"version":3,"sources":["../src/recorderhelper.js"],"names":["define","$","log","cloudpoodll","debug","status","init","opts","on_recording_start","on_recording_end","on_media_processing","that","message","type","action","startbuttonclick","stopbuttonclick","alert"],"mappings":"AAAAA,OAAM,4BAAC,CAAC,QAAD,CAAU,UAAV,CAAqB,6BAArB,CAAD,CAAsD,SAASC,CAAT,CAAWC,CAAX,CAAgBC,CAAhB,CAA6B,CACrF,aAKAD,CAAG,CAACE,KAAJ,CAAU,+BAAV,EAEA,MAAM,CAEFC,MAAM,CAAE,SAFN,CAIFC,IAAI,CAAE,cAASC,CAAT,CAAcC,CAAd,CACFC,CADE,CAEFC,CAFE,CAEkB,CAEpB,GAAIC,CAAAA,CAAI,CAAG,IAAX,CACAR,CAAW,CAACG,IAAZ,CAAiBC,CAAI,WAArB,CAEI,SAASK,CAAT,CAAiB,CAEb,OAAOA,CAAO,CAACC,IAAf,EACI,IAAK,WAAL,CACI,GAAoB,SAAjB,GAAAD,CAAO,CAACE,MAAX,CAA8B,CAC1BH,CAAI,CAACI,gBAAL,GACAP,CAAkB,CAACI,CAAD,CAErB,CAJD,IAIM,IAAoB,SAAjB,GAAAA,CAAO,CAACE,MAAX,CAA8B,CAChCH,CAAI,CAACK,eAAL,GACAP,CAAgB,CAACG,CAAD,CACnB,CACD,MACJ,IAAK,oBAAL,CAEI,GAAgB,QAAb,EAAAD,CAAI,CAACN,MAAR,CAA0B,CACtBK,CAAmB,CAACE,CAAD,CACtB,CACDD,CAAI,CAACN,MAAL,CAAY,QAAZ,CACA,MACJ,IAAK,OAAL,CACIY,KAAK,CAAC,WAAaL,CAAO,CAACA,OAAtB,CAAL,CACA,MApBR,CAsBH,CA1BL,CA4BH,CArCC,CAsCFI,eAAe,CAAE,0BAAU,CACvB,KAAKX,MAAL,CAAY,SAEf,CAzCC,CA0CFU,gBAAgB,CAAE,2BAAU,CACxB,KAAKV,MAAL,CAAY,SAEf,CA7CC,CAgDT,CAxDK,CAAN","sourcesContent":["define(['jquery','core/log','mod_pchat/cloudpoodllloader'], function($,log, cloudpoodll) {\n    \"use strict\"; // jshint ;_;\n/*\nThis file sets up the cloud poodll recorder and passes on events to registered handlers\n */\n\n    log.debug('Recorder helper: initialising');\n\n    return{\n\n        status: 'stopped',\n\n        init: function(opts,on_recording_start,\n            on_recording_end,\n            on_media_processing){\n\n            var that = this;\n            cloudpoodll.init(opts['recorderid'],\n\n                function(message){\n                    //console.log(message);\n                    switch(message.type){\n                        case 'recording':\n                            if(message.action==='started'){\n                                that.startbuttonclick();\n                                on_recording_start(message);\n\n                            }else if(message.action==='stopped'){\n                                that.stopbuttonclick();\n                                on_recording_end(message);\n                            }\n                            break;\n                        case 'awaitingprocessing':\n                            //awaitingprocessing fires often, but we only want to post once\n                            if(that.status!='posted') {\n                                on_media_processing(message);\n                            }\n                            that.status='posted';\n                            break;\n                        case 'error':\n                            alert('PROBLEM:' + message.message);\n                            break;\n                    }\n                }\n            );\n        },\n        stopbuttonclick: function(){\n            this.status='stopped';\n            //do something\n        },\n        startbuttonclick: function(){\n            this.status='started';\n           //do something\n        }\n\n    };//end of return value\n});"],"file":"recorderhelper.min.js"}