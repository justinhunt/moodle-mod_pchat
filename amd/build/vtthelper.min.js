define(["jquery"],function(a){return{convertVttToJson:function(a){var b={},c=[],d=/<\/?[^>]+(>|$)/g,e=!1,f=this,g=a.split("\n");return g.forEach(function(a,g){var h=a.replace(d,"");" "===h||""==h||(a.indexOf("-->")!==-1?(e=!0,b.start&&c.push(f.clone(b)),b={start:f.timeString2ms(a.split("-->")[0].trimRight().split(" ").pop()),end:f.timeString2ms(a.split("-->")[1].trimLeft().split(" ").shift()),part:""}):e&&(0!==c.length?c[c.length-1].part.replace(d,"")===a.replace(h,"")||(0===b.part.length?b.part=a:b.part=b.part+" "+a):(b.part=a,c.push(f.clone(b)),b.start=!1,b.end=!1,b.part="")))}),b.start&&c.push(f.clone(b)),c.forEach(function(a){a.part=a.part.replace(d,"")}),c},convertJsonToVtt:function(b){var c="WEBVTT";c+="\n\n";var d=this;return a.each(b,function(a,b){var e=d.ms2TimeString(b.start),f=d.ms2TimeString(b.end);c+=e+" --> "+f+"\n",c+=b.part+"\n",c+="\n"}),c},validateTimeString:function(a){if(!a)return!1;a=a.trim();var b=a.split(":");if(3!==b.length)return!1;for(var c=new RegExp("^[0-9]+$"),d=0;d<=3;d++){var e=b[d];switch(d){case 0:if(!c.test(e))return!1;var f=parseInt(e);if(f<0||f>23)return!1;break;case 1:if(!c.test(e))return!1;var g=parseInt(e);if(g<0||g>59)return!1;break;case 2:var h=e.split(".");if(2!=h.length)return!1;var i=h[0],j=h[1];if(!c.test(i))return!1;var i=parseInt(i);if(i<0||i>59)return!1;if(!c.test(j))return!1;var j=parseInt(j);if(j<0||j>999)return!1}}return!0},timeString2ms:function(a,b){return a=a.split("."),b=1*a[1]||0,a=a[0].split(":"),b+1e3*(a[2]?3600*a[0]+60*a[1]+1*a[2]:a[1]?60*a[0]+1*a[1]:1*a[0])},ms2TimeString:function(a,b,c,d,e){return b=a%1e3,c=a/1e3%60|0,d=a/6e4%60|0,e=a/36e5%24|0,(e?(e<10?"0"+e:e)+":":"00:")+(d<10?0:"")+d+":"+(c<10?0:"")+c+"."+(b<100?b<10?"00":0:"")+b},clone:function(a){if(null==a||"object"!=typeof a)return a;var b=a.constructor();for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}}});