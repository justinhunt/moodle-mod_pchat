define(["jquery","core/log","mod_pchat/conversationconstants","mod_pchat/definitions","core/notification","mod_pchat/previewhelper","mod_pchat/conversationeditor","mod_pchat/vtthelper"],(function($,log,constants,def,notification,previewhelper,conversationeditor,vtthelper){return log.debug("PChat Transcript Editor: initialising"),{init:function(opts){var controls=this.init_controls(opts);this.register_events(opts,controls),conversationeditor.init([],constants.mediatype_audio),previewhelper.init();var mediaurl=opts.mediaurl,transcriptjson=controls.updatecontrol.val();this.loadMedia(mediaurl),this.loadJSON(transcriptjson),conversationeditor.doSave=function(){var transcript=conversationeditor.fetchTranscriptionData();controls.updatecontrol.val(JSON.stringify(transcript))}},init_controls:function(opts){var controls={};return controls.updatecontrol=$('[name="'+opts.updatecontrol+'"]'),controls.savebutton=$(constants.savebutton),controls.removeallbutton=$(constants.removeallbutton),controls},register_events:function(opts,controls){},loadMedia:function(mediaurl){mediaurl&&""!==mediaurl&&previewhelper.setMediaURL(mediaurl)},loadVTT:function(vtturl){vtturl&&""!==vtturl&&$.get(vtturl,(function(thevtt){var transcript=vtthelper.convertVttToJson(thevtt);conversationeditor.resetData(transcript)}))},loadJSON:function(json){if(json&&""!==json){var transcript=JSON.parse(json);conversationeditor.resetData(transcript)}}}}));

//# sourceMappingURL=transcripteditor.min.js.map