{"version":3,"sources":["../src/updateselectedtopic.js"],"names":["define","$","log","def","ajax","notification","debug","init","opts","register_events","activityid","container","topicscontainer","on","topiccheckbox","topicNode","topicid","data","addClass","call","then","result","Deferred","reject","fail","exception","always","removeClass","all_selected","defs","find","length"],"mappings":"AAAAA,OAAM,iCAAC,CAAC,QAAD,CAAU,UAAV,CAAqB,uBAArB,CAA6C,WAA7C,CAA0D,mBAA1D,CAAD,CAAiF,SAASC,CAAT,CAAWC,CAAX,CAAgBC,CAAhB,CAAqBC,CAArB,CAA2BC,CAA3B,CAAyC,CAC5H,aAMAH,CAAG,CAACI,KAAJ,CAAU,4CAAV,EAEA,MAAM,CAEFC,IAAI,CAAE,cAASC,CAAT,CAAe,CAEjB,KAAKC,eAAL,CAAqBD,CAAI,WAAzB,CAEH,CANC,CAQFC,eAAe,CAAE,yBAASC,CAAT,CAAoB,CACjC,GAAIC,CAAAA,CAAS,CAAGV,CAAC,CAAC,IAAME,CAAG,CAACS,eAAX,CAAjB,CACAD,CAAS,CAACE,EAAV,CAAa,OAAb,CAAsB,IAAMV,CAAG,CAACW,aAAhC,CAA+C,UAAY,IAGnDC,CAAAA,CAAS,CAAGd,CAAC,CAAC,IAAD,CAHsC,CAInDe,CAAO,CAAGD,CAAS,CAACE,IAAV,CAAe,SAAf,CAJyC,CAMvDF,CAAS,CAACG,QAAV,CAAmB,cAAnB,EACAd,CAAI,CAACe,IAAL,CAAU,CAAC,CACP,WAAc,iCADP,CAEP,KAAQ,CACJ,QAAWH,CADP,CAEJ,WAAcN,CAFV,CAFD,CAAD,CAAV,EAMI,CANJ,EAMOU,IANP,CAMY,SAASC,CAAT,CAAiB,CACzB,GAAI,CAACA,CAAL,CAAa,CACT,MAAOpB,CAAAA,CAAC,CAACqB,QAAF,GAAaC,MAAb,EACV,CACDR,CAAS,CAACG,QAAV,CAAmB,WAAnB,CACH,CAXD,EAYKM,IAZL,CAYUnB,CAAY,CAACoB,SAZvB,EAaKC,MAbL,CAaY,UAAW,CACfX,CAAS,CAACY,WAAV,CAAsB,cAAtB,CACH,CAfL,CAgBH,CAvBD,CAwBH,CAlCC,CAqCNC,YAAY,CAAE,uBAAW,CACrB,GAAIjB,CAAAA,CAAS,CAAGV,CAAC,CAAC,IAAM4B,IAAI,CAACjB,eAAZ,CAAjB,CACA,MAAOD,CAAAA,CAAS,CAACmB,IAAV,CAAe,IAAMD,IAAI,CAACf,aAA1B,EAAyCiB,MAAzC,GAAoDpB,CAAS,CAACmB,IAAV,CAAe,iBAAf,EAAkCC,MAChG,CAxCK,CA2CT,CApDK,CAAN","sourcesContent":["define(['jquery','core/log','mod_pchat/definitions','core/ajax', 'core/notification'], function($,log, def, ajax, notification) {\r\n    \"use strict\"; // jshint ;_;\r\n\r\n/*\r\nThis file contains class and ID definitions.\r\n */\r\n\r\n    log.debug('PChat Updated Selected Topic: initialising');\r\n\r\n    return{\r\n\r\n        init: function(opts) {\r\n\r\n            this.register_events(opts['activityid']);\r\n\r\n        },\r\n\r\n        register_events: function(activityid){\r\n            var container = $('.' + def.topicscontainer);\r\n            container.on('click', '.' + def.topiccheckbox, function(e) {\r\n             //   e.preventDefault();\r\n\r\n                var topicNode = $(this);\r\n                var topicid = topicNode.data('topicid');\r\n\r\n                topicNode.addClass('term-loading');\r\n                ajax.call([{\r\n                    'methodname': 'mod_pchat_toggle_topic_selected',\r\n                    'args': {\r\n                        'topicid': topicid,\r\n                        'activityid': activityid,\r\n                    }\r\n                }])[0].then(function(result) {\r\n                    if (!result) {\r\n                        return $.Deferred().reject();\r\n                    }\r\n                    topicNode.addClass('term-seen');\r\n                })\r\n                    .fail(notification.exception)\r\n                    .always(function() {\r\n                        topicNode.removeClass('term-loading');\r\n                    });\r\n            });\r\n        },\r\n\r\n\r\n    all_selected: function() {\r\n        var container = $('.' + defs.topicscontainer);\r\n        return container.find('.' + defs.topiccheckbox).length === container.find('.term.term-seen').length\r\n    }\r\n\r\n};//end of return value\r\n});\r\n\r\n"],"file":"updateselectedtopic.min.js"}